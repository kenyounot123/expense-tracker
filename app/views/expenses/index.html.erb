<% content_for :title, "Expense Dashboard" %>

<% content_for :header do %>
  <nav class="flex justify-between items-center">
    <h1 class="text-xx-large"">
      <b>Welcome Back</b>
    </h1>
    <% if authenticated? %>
      <%= link_to "Log Out", logout_path, class: "btn btn-primary", method: :delete, data: { turbo_method: :delete } %>
    <% else %>
      <%= link_to "Log In", login_path, class: "btn btn-primary" %>
    <% end %>
  </nav>
<% end %>

<% content_for :analytics do %>
  <section class="card margin-block-double">
    <div class="flex justify-between items-center">
      <h2 class="margin-block-end">Total Spent: <span class="text-accent text-large">$<%= @total_spendings %></span></h2>
      <div data-controller="dropdown" class="position-relative">
        <button type="button" class="btn btn-dropdown" data-action="click->dropdown#toggle">
          View
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="">
            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
          </svg>
        </button>
        <ul
          data-dropdown-target="menu"
          class="dropdown-menu"
          data-action="click@window->dropdown#hide"
        >
          <li class="dropdown-item" data-action="">Income</li>
          <li class="dropdown-item" data-action="">Spent</li>
          <li class="dropdown-item" data-action="">Profits</li>
        </ul>
      </div>
    </div>

    <%= column_chart charts_spendings_path(Current.user.id),
        thousands: ",",
        library: {
          scales: {
            x: {
              grid: { color: chart_color_for_scheme },
              border: { color: chart_color_for_scheme },
              ticks: { color: chart_color_for_scheme, fontFamily: "Poppins" }
            },
            y: {
              grid: { color: chart_color_for_scheme },
              border: { color: chart_color_for_scheme },
              ticks: { color: chart_color_for_scheme, fontFamily: "Poppins" }
            }
          }
        } %>
  </section>
<% end %>

<div class="flex justify-between items-center margin-block">
  <h2>Activity</h2>

  <%= link_to new_expense_path, class: "btn btn-secondary flex items-center justify-center" do %>
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
    </svg> 
    <p>Add Expense</p>
  <% end %>

</div>

<%= render(@expenses) || "You currently have no expenses" %>

